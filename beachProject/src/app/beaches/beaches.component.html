<app-header></app-header>
<div *ngIf="!showDetail">
  <div class="parallax"></div>
  <div class="parallax"></div>
  <div class="plan">
    Plan Your Trip
  </div>
</div>

<div *ngIf="!showDetail" class="search">
  <div class="container sticky-search">
    <app-search (search)="search()"></app-search>
    <google-map [zoom]="zoom" [center]="center" [options]="options" width="100%" class="google">
      <map-marker #markerItem="mapMarker" *ngFor="let marker of getMarkers()"
        (mapClick)="openInfo(markerItem, marker.info)" [position]="marker.position" [label]="marker.label"
        [title]="marker.title" [options]="{animation: marker.animation, icon: marker.icon }" [animation]="setAnimation">
      </map-marker>

      <map-info-window>
        <h3>{{infoContent?.placeName}}</h3>
        <h4>{{infoContent?.address}}</h4>
        <h5>{{infoContent?.rating}}</h5>
      </map-info-window>

    </google-map>
  </div>
  <div *ngIf="!showDetail" class="container search-results">
    <p>Top Results</p>
    <div class="col beach-preview" *ngFor="let beach of getBeaches()">
      <div class="beach-header">
        <div class="beach-name">
          <h3 (click)="displayDetail(beach)" class="beach-name"> {{ beach.name }}</h3>
        </div>
        <div class="favorite">
          <p (click)="addFavorites(beach)">Fav</p>
          <!-- <input id="heart" type="checkbox"(click)="addFavorites(beach)" /><label for="heart">‚ù§</label> -->
        </div>
      </div>
      <div class="beach-icon">
        <span class="material-icons">location_on</span>
        <p>{{ beach.formatted_address }}</p>
      </div>
      <p>{{ beach.rating }}</p>
      <button (click)="displayDetail(beach)">
        <span class="material-icons">info </span>
        More Info!</button>

    </div>

  </div>
</div>

<div *ngIf="showDetail">
  <button (click)="showDetail = false">X</button>
  <div class="beach-card">
    <h2><strong>{{selectedBeach.name}}</strong></h2>
    <h2><strong>{{selectedBeach.formatted_address}}</strong></h2>
    <h2><strong>{{selectedBeach.rating}}</strong></h2>
    <!--Possible image goes here-->
    <div>
      <p>Tide</p>
       <p>{{ selectedBeach.weatherInfo?.data.weather[0].tides[0].tide_data[0].tideTime}}</p> 
       <p>{{selectedBeach.weatherInfo?.data.weather[0].tides[0].tide_data[0].tide_type}}</p> 

      <p>{{ selectedBeach.weatherInfo?.data.weather[0].tides[0].tide_data[2].tideTime}}</p> 
       <p>{{selectedBeach.weatherInfo?.data.weather[0].tides[0].tide_data[2].tide_type}}</p> 
    </div>
    <div *ngFor="let hourly of selectedBeach.weatherInfo?.data.weather[0].hourly">
      <p>Hourly </p>
      <p>time: {{ hourly.time }}</p>
      <p>{{ hourly.FeelsLikeF }}</p>
      <p>Wind Speed</p>
      <p>{{ hourly.windspeedMiles }}</p>
      <p>Weather Description</p>
      <p>{{ hourly.weatherDesc[0].value }}</p>
      <p>Weather Icon</p>
      <img [src]="hourly.weatherIconUrl[0].value">
    </div>
    <h2><strong>Current Weather conditions</strong></h2>
    <p>Daily Forecast</p>
    <p>Today's High: {{selectedBeach.weatherInfo?.data.weather[0].maxtempF}} ,
      Today's Low: {{selectedBeach.weatherInfo?.data.weather[0].mintempF}}</p>
    <img [src]="selectedBeach.weatherInfo?.data.weather[0].hourly[4].weatherIconUrl[0].value">
    <p>Sunrise: {{selectedBeach.weatherInfo?.data.weather[0].astronomy[0].sunrise}},
      Sunset: {{selectedBeach.weatherInfo?.data.weather[0].astronomy[0].sunset}}
      MoonPhase: {{selectedBeach.weatherInfo?.data.weather[0].astronomy[0].moon_phase}}</p>

    <p>Tomorrows's High: {{selectedBeach.weatherInfo?.data.weather[1].maxtempF}} ,
      Tomorrows's Low: {{selectedBeach.weatherInfo?.data.weather[1].mintempF}}</p>
    <img [src]="selectedBeach.weatherInfo?.data.weather[1].hourly[4].weatherIconUrl[0].value">
    <p>Sunrise: {{selectedBeach.weatherInfo?.data.weather[1].astronomy[0].sunrise}},
      Sunset: {{selectedBeach.weatherInfo?.data.weather[1].astronomy[0].sunset}}
      MoonPhase: {{selectedBeach.weatherInfo?.data.weather[1].astronomy[0].moon_phase}}</p>

    <p>{{ selectedBeach.weatherInfo?.data.weather[2].date }} High:
      {{selectedBeach.weatherInfo?.data.weather[2].maxtempF}} ,
      {{ selectedBeach.weatherInfo?.data.weather[2].date }} Low: {{selectedBeach.weatherInfo?.data.weather[2].mintempF}}
    </p>
    <img [src]="selectedBeach.weatherInfo?.data.weather[2].hourly[4].weatherIconUrl[0].value">

    <p>Sunrise: {{selectedBeach.weatherInfo?.data.weather[2].astronomy[0].sunrise}},
      Sunset: {{selectedBeach.weatherInfo?.data.weather[2].astronomy[0].sunset}}
      MoonPhase: {{selectedBeach.weatherInfo?.data.weather[2].astronomy[0].moon_phase}}</p>

    <p>{{ selectedBeach.weatherInfo?.data.weather[3].date }} High:
      {{selectedBeach.weatherInfo?.data.weather[3].maxtempF}} ,
      {{ selectedBeach.weatherInfo?.data.weather[3].date }} Low: {{selectedBeach.weatherInfo?.data.weather[3].mintempF}}
    </p>
    <img [src]="selectedBeach.weatherInfo?.data.weather[3].hourly[4].weatherIconUrl[0].value">

    <p>Sunrise: {{selectedBeach.weatherInfo?.data.weather[3].astronomy[0].sunrise}},
      Sunset: {{selectedBeach.weatherInfo?.data.weather[3].astronomy[0].sunset}}
      MoonPhase: {{selectedBeach.weatherInfo?.data.weather[3].astronomy[0].moon_phase}}</p>

    <p>{{ selectedBeach.weatherInfo?.data.weather[4].date }} High:
      {{selectedBeach.weatherInfo?.data.weather[4].maxtempF}} ,
      {{ selectedBeach.weatherInfo?.data.weather[4].date }} Low: {{selectedBeach.weatherInfo?.data.weather[4].mintempF}}
    </p>
    <img [src]="selectedBeach.weatherInfo?.data.weather[4].hourly[4].weatherIconUrl[0].value">

    <p>Sunrise: {{selectedBeach.weatherInfo?.data.weather[4].astronomy[0].sunrise}},
      Sunset: {{selectedBeach.weatherInfo?.data.weather[4].astronomy[0].sunset}}
      MoonPhase: {{selectedBeach.weatherInfo?.data.weather[4].astronomy[0].moon_phase}}</p>


  </div>
</div>

<app-footer></app-footer>